# Browser Automation Service - Environment Configuration
# Copy this file to .env.local and fill in your values

# =============================================================================
# MongoDB Configuration (REQUIRED)
# =============================================================================
# MongoDB connection string - use either MONGODB_URI or MONGODB_URL
# Format: mongodb://[username:password@]host[:port]/[database][?options]
# Examples:
#   - Local: mongodb://localhost:27017/browser_automation
#   - Atlas: mongodb+srv://user:pass@cluster.mongodb.net/database
#   - DigitalOcean: mongodb+srv://user:pass@host.mongo.ondigitalocean.com/db?tls=true&authSource=admin&replicaSet=db-name
MONGODB_URI=mongodb://localhost:27017/browser_automation_service

# Database name (required, override if not in URI)
MONGODB_DATABASE=browser_automation_service

# MongoDB debug logging (default: false)
MONGODB_DEBUG_LOGS=false

# =============================================================================
# Temporal Configuration (REQUIRED for Workflow Orchestration)
# =============================================================================
# Temporal server connection URL
# Examples:
#   - Local: localhost:7233
#   - Cloud: namespace.account.tmprl.cloud:7233
TEMPORAL_URL=localhost:7233

# Temporal namespace (default: "default")
TEMPORAL_NAMESPACE=default

# Unified task queue for all workflows (V1 + V2)
TEMPORAL_KNOWLEDGE_QUEUE=knowledge-extraction-queue

# Temporal workflow timeout (seconds, default: 7200 = 2 hours)
TEMPORAL_WORKFLOW_TIMEOUT=7200

# Temporal activity timeout (seconds, default: 120 = 2 minutes)
TEMPORAL_ACTIVITY_TIMEOUT=120

# Temporal UI URL (for monitoring workflows)
TEMPORAL_UI_URL=http://localhost:8080

# =============================================================================
# S3 Configuration (REQUIRED for File-Based Ingestion)
# =============================================================================
# Choose ONE of the following configurations:

# --- Option 1: AWS S3 (Production - IAM-based) ---
# Region where your S3 bucket is located
# S3_REGION=us-east-1

# S3 bucket name for knowledge extraction files
# S3_BUCKET=knowledge-extraction

# AWS credentials (optional if using IAM roles in production)
# AWS_ACCESS_KEY_ID=your_access_key_id
# AWS_SECRET_ACCESS_KEY=your_secret_access_key

# --- Option 2: DigitalOcean Spaces (Development - Access Key-based) ---
# DigitalOcean Spaces endpoint URL
S3_ENDPOINT=https://nyc3.digitaloceanspaces.com

# S3 bucket/space name
S3_BUCKET=knowledge-extraction

# DigitalOcean Spaces access credentials
S3_ACCESS_KEY_ID=your_spaces_access_key_id
S3_SECRET_ACCESS_KEY=your_spaces_secret_access_key

# S3 download configuration
# Timeout for S3 downloads in seconds (default: 300 = 5 minutes)
# S3_DOWNLOAD_TIMEOUT=300

# Chunk size for streaming downloads in bytes (default: 1048576 = 1MB)
# S3_DOWNLOAD_CHUNK_SIZE=1048576

# =============================================================================
# Redis Configuration (OPTIONAL - for Pub/Sub and Caching)
# =============================================================================
# Redis connection URL
# Examples:
#   - Local: redis://localhost:6379
#   - With password: redis://:password@localhost:6379
#   - DigitalOcean: rediss://default:password@host:25061
REDIS_URL=redis://localhost:6379

# =============================================================================
# Server Configuration
# =============================================================================
# Server host (default: 0.0.0.0 for all interfaces)
HOST=0.0.0.0

# Server port (default: 8000)
PORT=8000

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# API base path (default: empty, can be set to /api/v1 etc.)
# API_BASE_PATH=

# =============================================================================
# Feature Flags
# =============================================================================
# Enable browser-based verification workflows (default: false)
FEATURE_BROWSER_VERIFICATION=false

# Enable debug mode (verbose logging, etc.)
# DEBUG=false

# =============================================================================
# LLM API Keys (OPTIONAL - for AI-Powered Features)
# =============================================================================
# OpenAI API key (for GPT models)
# Get your key from: https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-proj-...

# Anthropic API key (for Claude models)
# Get your key from: https://console.anthropic.com/
# ANTHROPIC_API_KEY=sk-ant-...

# Google API key (for Gemini models)
# Get your key from: https://aistudio.google.com/app/apikey
# GOOGLE_API_KEY=...

# Deepgram API key (for video transcription)
# Get your key from: https://console.deepgram.com/signup
# DEEPGRAM_API_KEY=...

# Browser Use API key (for ChatBrowserUse - recommended)
# Get $10 free credits at: https://cloud.browser-use.com/new-api-key
# BROWSER_USE_API_KEY=...

# DeepSeek API key
# DEEPSEEK_API_KEY=...

# Groq API key
# GROQ_API_KEY=...

# =============================================================================
# Browser Configuration (OPTIONAL - for Browser Automation)
# =============================================================================
# Run browser in headless mode (default: auto-detect based on display)
# BROWSER_HEADLESS=true

# Browser timeout in milliseconds (default: 30000 = 30 seconds)
# BROWSER_TIMEOUT=30000

# Path to Chrome/Chromium executable (optional, auto-detected if not set)
# BROWSER_EXECUTABLE_PATH=/path/to/chrome

# User data directory for browser profiles (optional)
# BROWSER_USER_DATA_DIR=./browser_data

# Browser logging level (DEBUG, INFO, WARNING, ERROR)
BROWSER_USE_LOGGING_LEVEL=INFO

# CDP (Chrome DevTools Protocol) logging level
CDP_LOGGING_LEVEL=WARNING

# =============================================================================
# LiveKit Configuration (OPTIONAL - for Real-time Browser Streaming)
# =============================================================================
# LiveKit server URL
# Example: wss://your-project.livekit.cloud
# LIVEKIT_URL=wss://...

# LiveKit API credentials
# Get from: https://cloud.livekit.io/
# LIVEKIT_API_KEY=...
# LIVEKIT_API_SECRET=...

# =============================================================================
# Telemetry & Analytics (OPTIONAL)
# =============================================================================
# Enable anonymous telemetry (default: true)
ANONYMIZED_TELEMETRY=false

# Version check on startup (default: true)
BROWSER_USE_VERSION_CHECK=true

# =============================================================================
# Development & Testing (OPTIONAL)
# =============================================================================
# Enable hot reload for development
# HOT_RELOAD=false

# Test database (use separate database for tests)
# TEST_MONGODB_DATABASE=browser_automation_test
# TEST_ARANGODB_DATABASE=web_knowledge_test

# =============================================================================
# Proxy Configuration (OPTIONAL)
# =============================================================================
# HTTP/HTTPS proxy server
# BROWSER_USE_PROXY_SERVER=http://proxy.example.com:8080

# Proxy bypass list (comma-separated)
# BROWSER_USE_NO_PROXY=localhost,127.0.0.1,*.internal

# Proxy authentication
# BROWSER_USE_PROXY_USERNAME=username
# BROWSER_USE_PROXY_PASSWORD=password

# =============================================================================
# AWS Bedrock Configuration (OPTIONAL - for AWS Bedrock Models)
# =============================================================================
# Requires: pip install browser-use[aws]
# Note: You need proper AWS Bedrock access and model permissions

# AWS credentials
# AWS_ACCESS_KEY_ID=your_access_key_id
# AWS_SECRET_ACCESS_KEY=your_secret_access_key

# Optional: Session token (for temporary credentials)
# AWS_SESSION_TOKEN=your_session_token

# AWS region for Bedrock
# AWS_REGION=us-east-1

# =============================================================================
# Notes
# =============================================================================
# 1. **Never commit .env.local to git** - it contains secrets
# 2. Use .env.example as a template for your .env.local
# 3. For production, use environment variables or secret managers
# 4. S3 configuration is REQUIRED for file-based ingestion
# 5. Temporal must be running for knowledge extraction workflows
# 6. MongoDB and ArangoDB are REQUIRED for all operations

# =============================================================================
# Website Crawling Configuration (OPTIONAL)
# =============================================================================
# Use Browser-Use cloud browsers for website crawling (better bot detection bypass)
# USE_CLOUD_BROWSER=false


# VIDEO_PROCESSING_TEST_MODE=1  # Set to 1 to process only first batch for faster testing
